f() {
    local x;
    export x;
    echo "f <${x-unset}>"
    x=hi
    echo "f <${x-still unset}>"
    readonly x
}

echo WITH x UNSET
echo "<${x-initially unset}>"
f
echo "<${x-still unset}>"

echo WITH x SET
x=defaulted
echo "<${x-initially unset}>"
f
echo "<${x-still unset}>"
x=reset
echo "<${x-not reset}>"
